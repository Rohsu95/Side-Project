{"ast":null,"code":"import _objectSpread from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import*as s from\"./style\";import axios from\"axios\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signup=function Signup(){var _errors$username,_errors$email,_errors$password;var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.formState.errors;var navigate=useNavigate();var handleUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData,res,_err$response,_err$response$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();formData.append(\"avatar\",file);formData.append(\"email\",watch(\"email\"));formData.append(\"password\",watch(\"password\"));formData.append(\"username\",watch(\"username\"));_context.next=8;return axios.post(process.env.REACT_APP_BACKEND_URL+\"/api/users/signup\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});case 8:res=_context.sent;navigate(\"/login\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);alert(_context.t0===null||_context.t0===void 0?void 0:(_err$response=_context.t0.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function handleUpload(){return _ref.apply(this,arguments);};}();var handleFileChange=function handleFileChange(event){setFile(event.target.files[0]);};var handleDeletePreview=function handleDeletePreview(){setFile(null);};return/*#__PURE__*/_jsxs(s.Container,{children:[/*#__PURE__*/_jsxs(s.Sign,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign up\"}),/*#__PURE__*/_jsx(s.SignupLink,{to:\"/login\",children:/*#__PURE__*/_jsx(\"p\",{className:\"signup\",children:\"Have an account?\"})})]}),/*#__PURE__*/_jsx(s.FormContainer,{children:/*#__PURE__*/_jsxs(\"form\",{action:\"/upload\",encType:\"multipart/form-data\",onSubmit:handleSubmit(handleUpload),children:[/*#__PURE__*/_jsx(s.ImgDiv,{className:file?\"\":\"imgLine\",children:file&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"EditImg\",src:URL.createObjectURL(file),alt:\"\\uC774\\uBBF8\\uC9C0 \\uC0AC\\uC9C4\"}),/*#__PURE__*/_jsx(\"button\",{className:\"DeleteBtn\",onClick:handleDeletePreview,children:\"X\"})]})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"input-file\",className:\"label-file\",children:\"\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0 \\uCD94\\uAC00\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"input-file\",accept:\"image/*\",name:\"avatar\",onChange:handleFileChange,style:{display:\"none\"}}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"Input\",placeholder:\"Username\"},register(\"username\",{required:\"4자 이상 12자리 이하의 username을 입력해 주세요\",minLength:{value:4,message:\"4자 이상의 username을 입력해 주세요\"},maxLength:{value:10,message:\"10자 이하의 usename을 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.message}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"Input\",placeholder:\"Email\"},register(\"email\",{required:\"12자 이상 20자 이하의 email을 입력해 주세요\",minLength:{value:12,message:\"12자 이상의 email을 입력해 주세요\"},maxLength:{value:20,message:\"20자 이하의 email을 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"Input\",placeholder:\"Password\"},register(\"password\",{required:\"8자 이상 12자 이하의 password를 입력해 주세요\",minLength:{value:8,message:\"8자 이상의 password를 입력해 주세요\"},maxLength:{value:12,message:\"12자 이하의 password를 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(\"button\",{className:\"SignBtn\",children:\"Sign up\"})]})})]});};export default Signup;","map":{"version":3,"names":["useForm","useNavigate","s","axios","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Signup","_errors$username","_errors$email","_errors$password","_useState","_useState2","_slicedToArray","file","setFile","_useForm","register","handleSubmit","watch","errors","formState","navigate","handleUpload","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","res","_err$response","_err$response$data","wrap","_callee$","_context","prev","next","FormData","append","post","process","env","REACT_APP_BACKEND_URL","headers","sent","t0","alert","response","data","message","stop","apply","arguments","handleFileChange","event","target","files","handleDeletePreview","Container","children","Sign","SignupLink","to","className","FormContainer","action","encType","onSubmit","ImgDiv","src","URL","createObjectURL","alt","onClick","htmlFor","type","id","accept","name","onChange","style","display","_objectSpread","placeholder","required","minLength","value","maxLength","username","email","password"],"sources":["/Users/rohsuhyeok/Desktop/Side-Project/client/src/page/SignUp/Signup.js"],"sourcesContent":["import { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as s from \"./style\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\n\nconst Signup = () => {\n  const [file, setFile] = useState();\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm();\n  const navigate = useNavigate();\n\n  const handleUpload = async () => {\n    try {\n      const formData = new FormData();\n\n      formData.append(\"avatar\", file);\n      formData.append(\"email\", watch(\"email\"));\n      formData.append(\"password\", watch(\"password\"));\n      formData.append(\"username\", watch(\"username\"));\n\n      const res = await axios.post(\n        process.env.REACT_APP_BACKEND_URL + \"/api/users/signup\",\n\n        formData,\n        {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n      navigate(\"/login\");\n    } catch (err) {\n      alert(err?.response?.data?.message);\n    }\n  };\n  const handleFileChange = (event) => {\n    setFile(event.target.files[0]);\n  };\n\n  const handleDeletePreview = () => {\n    setFile(null);\n  };\n\n  return (\n    <s.Container>\n      <s.Sign>\n        <h1>Sign up</h1>\n        <s.SignupLink to=\"/login\">\n          <p className=\"signup\">Have an account?</p>\n        </s.SignupLink>\n      </s.Sign>\n      <s.FormContainer>\n        <form\n          action=\"/upload\"\n          encType=\"multipart/form-data\"\n          onSubmit={handleSubmit(handleUpload)}\n        >\n          <s.ImgDiv className={file ? \"\" : \"imgLine\"}>\n            {file && (\n              <>\n                <img\n                  className=\"EditImg\"\n                  src={URL.createObjectURL(file)}\n                  alt=\"이미지 사진\"\n                />\n                <button className=\"DeleteBtn\" onClick={handleDeletePreview}>\n                  X\n                </button>\n              </>\n            )}\n          </s.ImgDiv>\n\n          <label htmlFor=\"input-file\" className=\"label-file\">\n            프로필 이미지 추가\n          </label>\n          <input\n            type=\"file\"\n            id=\"input-file\"\n            accept=\"image/*\"\n            name=\"avatar\"\n            onChange={handleFileChange}\n            style={{ display: \"none\" }}\n          />\n\n          <input\n            type=\"text\"\n            className=\"Input\"\n            placeholder=\"Username\"\n            {...register(\"username\", {\n              required: \"4자 이상 12자리 이하의 username을 입력해 주세요\",\n              minLength: {\n                value: 4,\n                message: \"4자 이상의 username을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 10,\n                message: \"10자 이하의 usename을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.username?.message}</span>\n          <input\n            type=\"email\"\n            className=\"Input\"\n            placeholder=\"Email\"\n            {...register(\"email\", {\n              required: \"12자 이상 20자 이하의 email을 입력해 주세요\",\n              minLength: {\n                value: 12,\n                message: \"12자 이상의 email을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 20,\n                message: \"20자 이하의 email을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.email?.message}</span>\n          <input\n            type=\"password\"\n            className=\"Input\"\n            placeholder=\"Password\"\n            {...register(\"password\", {\n              required: \"8자 이상 12자 이하의 password를 입력해 주세요\",\n              minLength: {\n                value: 8,\n                message: \"8자 이상의 password를 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 password를 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.password?.message}</span>\n          <button className=\"SignBtn\">Sign up</button>\n        </form>\n      </s.FormContainer>\n    </s.Container>\n  );\n};\nexport default Signup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}