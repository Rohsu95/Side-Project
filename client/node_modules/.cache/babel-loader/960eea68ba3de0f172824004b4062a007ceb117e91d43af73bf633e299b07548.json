{"ast":null,"code":"import _objectSpread from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import*as s from\"./style\";import axios from\"axios\";import{Cookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Setting=function Setting(){var _errors$username,_errors$email,_errors$password;var cookie=new Cookies();var Token=cookie.get(\"token\");var userId=cookie.get(\"userId\");var navigate=useNavigate();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.formState.errors;var onSetting=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.patch(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/users/\").concat(id),{username:watch(\"username\"),email:watch(\"email\"),password:watch(\"password\")},{headers:{Authorization:\"Bearer \".concat(Token)}}).then(function(res){var _res$data,_res$data$user;console.log(res);var username=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$user=_res$data.user)===null||_res$data$user===void 0?void 0:_res$data$user.username;cookie.set(\"username\",username);navigate(\"/mypage\");window.location.reload();}).catch(function(error){var _error$response,_error$response$data;alert(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message);});case 2:case\"end\":return _context.stop();}},_callee);}));return function onSetting(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(s.Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Settings\"}),/*#__PURE__*/_jsx(s.FormContainer,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(function(){return onSetting(userId);}),children:[/*#__PURE__*/_jsx(s.SecondInput,_objectSpread({type:\"text\",placeholder:\"Username\",name:\"username\"},register(\"username\",{required:\"4자 이상 12자리 이하로 입력해 주세요\",minLength:{value:4,message:\"4자 이상의 username을 입력해 주세요\"},maxLength:{value:12,message:\"12자 이하의 usename을 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.message}),/*#__PURE__*/_jsx(s.SecondInput,_objectSpread({placeholder:\"Email\",name:\"email\",type:\"email\"},register(\"email\",{required:\"12자 이상 20자 이하로 입력해 주세요\",minLength:{value:12,message:\"12자 이상의 email을 입력해 주세요\"},maxLength:{value:20,message:\"20자 이하의 email을 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(s.SecondInput,_objectSpread({placeholder:\"New Password\",type:\"password\",name:\"password\"},register(\"password\",{required:\"8자 이상 12자 이하로 입력해 주세요\",minLength:{value:8,message:\"8자 이상의 password를 입력해 주세요\"},maxLength:{value:12,message:\"12자 이하의 password를 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(s.SettingBtn,{children:\"Update Settings\"})]})})]});};export default Setting;","map":{"version":3,"names":["React","useForm","useNavigate","s","axios","Cookies","jsx","_jsx","jsxs","_jsxs","Setting","_errors$username","_errors$email","_errors$password","cookie","Token","get","userId","navigate","_useForm","register","handleSubmit","watch","errors","formState","onSetting","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","wrap","_callee$","_context","prev","next","patch","concat","process","env","REACT_APP_BACKEND_URL","username","email","password","headers","Authorization","then","res","_res$data","_res$data$user","console","log","data","user","set","window","location","reload","catch","error","_error$response","_error$response$data","alert","response","message","stop","_x","apply","arguments","Container","children","FormContainer","onSubmit","SecondInput","_objectSpread","type","placeholder","name","required","minLength","value","maxLength","SettingBtn"],"sources":["/Users/rohsuhyeok/Desktop/Side-Project/client/src/page/Setting/Setting.js"],"sourcesContent":["import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as s from \"./style\";\nimport axios from \"axios\";\nimport { Cookies } from \"react-cookie\";\n\nconst Setting = () => {\n  const cookie = new Cookies();\n  const Token = cookie.get(\"token\");\n  const userId = cookie.get(\"userId\");\n\n  const navigate = useNavigate();\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm();\n\n  const onSetting = async (id) => {\n    await axios\n      .patch(\n        `${process.env.REACT_APP_BACKEND_URL}/api/users/${id}`,\n        {\n          username: watch(\"username\"),\n          email: watch(\"email\"),\n          password: watch(\"password\"),\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${Token}`,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res);\n        const username = res?.data?.user?.username;\n        cookie.set(\"username\", username);\n        navigate(\"/mypage\");\n        window.location.reload();\n      })\n      .catch((error) => {\n        alert(error?.response?.data?.message);\n      });\n  };\n  return (\n    <s.Container>\n      <h1>Your Settings</h1>\n      <s.FormContainer>\n        <form onSubmit={handleSubmit(() => onSetting(userId))}>\n          <s.SecondInput\n            type=\"text\"\n            placeholder=\"Username\"\n            name=\"username\"\n            {...register(\"username\", {\n              required: \"4자 이상 12자리 이하로 입력해 주세요\",\n              minLength: {\n                value: 4,\n                message: \"4자 이상의 username을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 usename을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.username?.message}</span>\n\n          <s.SecondInput\n            placeholder=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            {...register(\"email\", {\n              required: \"12자 이상 20자 이하로 입력해 주세요\",\n              minLength: {\n                value: 12,\n                message: \"12자 이상의 email을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 20,\n                message: \"20자 이하의 email을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.email?.message}</span>\n\n          <s.SecondInput\n            placeholder=\"New Password\"\n            type=\"password\"\n            name=\"password\"\n            {...register(\"password\", {\n              required: \"8자 이상 12자 이하로 입력해 주세요\",\n              minLength: {\n                value: 8,\n                message: \"8자 이상의 password를 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 password를 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.password?.message}</span>\n\n          <s.SettingBtn>Update Settings</s.SettingBtn>\n        </form>\n      </s.FormContainer>\n    </s.Container>\n  );\n};\n\nexport default Setting;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}