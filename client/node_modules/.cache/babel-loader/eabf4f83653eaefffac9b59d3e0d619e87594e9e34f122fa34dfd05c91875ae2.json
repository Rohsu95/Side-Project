{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import*as s from\"./style\";import axios from\"axios\";import{getCookie}from\"cookies\";import{Cookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Editor=function Editor(_ref){var userInfo=_ref.userInfo;var cookie=new Cookies();var userId=cookie.get(\"userId\");var username=cookie.get(\"username\");var image=cookie.get(\"image\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),tags=_useState2[0],setTags=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tagsList=_useState4[0],setTagsList=_useState4[1];var _useState5=useState({title:\"\",content:\"\"}),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];var navigate=useNavigate();var title=input.title,content=input.content;var onTotal=function onTotal(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},name,value)));};// 엔터 누를 시 실행\nvar onKeyPress=function onKeyPress(e){if(e.target.value.length!==0&&e.key===\"Enter\"){onItem();}};// 태그\nvar onItem=function onItem(){var updataed=_toConsumableArray(tagsList);updataed.push(tags);setTagsList(updataed);setTags(\"\");};// 삭제\nvar onDelete=function onDelete(id){setTagsList(function(tagsList){return tagsList.filter(function(_,el){return el!==id;});});};// 생성\nvar onWriting=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var tagsItem,now,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;tagsItem=String(tagsList);now=new Date(Date.now());_context.next=5;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api/places/editor\"),{title:title,content:content,tags:tagsItem,createdAt:now,creator:userId,username:username,image:image},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(getCookie(\"token\"))}});case 5:res=_context.sent;navigate(\"/\");window.location.reload();_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.message);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function onWriting(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(s.EditorContainer,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(s.TitleInput,{type:\"text\",name:\"title\",value:title,onChange:onTotal,placeholder:\"Article Title\"}),/*#__PURE__*/_jsx(s.ContentArea,{type:\"text\",name:\"content\",value:content,onChange:onTotal,placeholder:\"Write your article (in markdown)\"}),/*#__PURE__*/_jsx(s.TagInput,{type:\"text\",name:\"tags\",value:tags,onChange:function onChange(e){return setTags(e.target.value);},onKeyPress:onKeyPress,placeholder:\"\\uD0DC\\uADF8 \\uC791\\uC131 \\uD6C4 \\uC5D4\\uD130\\uB97C \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsx(s.TagDiv,{children:tagsList.map(function(el,id){return/*#__PURE__*/_jsxs(s.TagSpan,{children:[/*#__PURE__*/_jsx(s.TagDelete,{\"aria-label\":\"delete_button\",onClick:function onClick(){return onDelete(id);},children:\"X\"}),el]},id);})}),/*#__PURE__*/_jsx(s.EditorBtn,{onClick:onWriting,children:\"Publish Article\"})]})});};export default Editor;","map":{"version":3,"names":["React","useState","useNavigate","s","axios","getCookie","Cookies","jsx","_jsx","jsxs","_jsxs","Editor","_ref","userInfo","cookie","userId","get","username","image","_useState","_useState2","_slicedToArray","tags","setTags","_useState3","_useState4","tagsList","setTagsList","_useState5","title","content","_useState6","input","setInput","navigate","onTotal","e","_e$target","target","name","value","_objectSpread","_defineProperty","onKeyPress","length","key","onItem","updataed","_toConsumableArray","push","onDelete","id","filter","_","el","onWriting","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","tagsItem","now","res","wrap","_callee$","_context","prev","next","String","Date","post","concat","process","env","REACT_APP_BACKEND_URL","createdAt","creator","headers","Authorization","sent","window","location","reload","t0","alert","response","data","message","stop","apply","arguments","EditorContainer","children","TitleInput","type","onChange","placeholder","ContentArea","TagInput","TagDiv","map","TagSpan","TagDelete","onClick","EditorBtn"],"sources":["/Users/rohsuhyeok/Desktop/Side-Project/client/src/page/Editor/Editor.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as s from \"./style\";\nimport axios from \"axios\";\nimport { getCookie } from \"cookies\";\nimport { Cookies } from \"react-cookie\";\n\nconst Editor = ({ userInfo }) => {\n  const cookie = new Cookies();\n  const userId = cookie.get(\"userId\");\n  const username = cookie.get(\"username\");\n  const image = cookie.get(\"image\");\n\n  const [tags, setTags] = useState(\"\");\n  const [tagsList, setTagsList] = useState([]);\n  const [input, setInput] = useState({\n    title: \"\",\n    content: \"\",\n  });\n\n  const navigate = useNavigate();\n  const { title, content } = input;\n\n  const onTotal = (e) => {\n    const { name, value } = e.target;\n    setInput({\n      ...input,\n      [name]: value,\n    });\n  };\n  // 엔터 누를 시 실행\n  const onKeyPress = (e) => {\n    if (e.target.value.length !== 0 && e.key === \"Enter\") {\n      onItem();\n    }\n  };\n  // 태그\n  const onItem = () => {\n    let updataed = [...tagsList];\n    updataed.push(tags);\n    setTagsList(updataed);\n    setTags(\"\");\n  };\n  // 삭제\n  const onDelete = (id) => {\n    setTagsList((tagsList) => tagsList.filter((_, el) => el !== id));\n  };\n\n  // 생성\n  const onWriting = async () => {\n    try {\n      let tagsItem = String(tagsList);\n      const now = new Date(Date.now());\n\n      const res = await axios.post(\n        `${process.env.REACT_APP_BACKEND_URL}/api/places/editor`,\n        {\n          title: title,\n          content: content,\n          tags: tagsItem,\n          createdAt: now,\n          creator: userId,\n          username: username,\n          image: image,\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${getCookie(\"token\")}`,\n          },\n        }\n      );\n\n      navigate(\"/\");\n      window.location.reload();\n    } catch (error) {\n      alert(error.response.data.message);\n    }\n  };\n\n  return (\n    <s.EditorContainer>\n      <div>\n        <s.TitleInput\n          type=\"text\"\n          name=\"title\"\n          value={title}\n          onChange={onTotal}\n          placeholder=\"Article Title\"\n        />\n        <s.ContentArea\n          type=\"text\"\n          name=\"content\"\n          value={content}\n          onChange={onTotal}\n          placeholder=\"Write your article (in markdown)\"\n        />\n        <s.TagInput\n          type=\"text\"\n          name=\"tags\"\n          value={tags}\n          onChange={(e) => setTags(e.target.value)}\n          onKeyPress={onKeyPress}\n          placeholder=\"태그 작성 후 엔터를 눌러주세요\"\n        />\n        <s.TagDiv>\n          {tagsList.map((el, id) => (\n            <s.TagSpan key={id}>\n              <s.TagDelete\n                aria-label=\"delete_button\"\n                onClick={() => onDelete(id)}\n              >\n                X\n              </s.TagDelete>\n              {el}\n            </s.TagSpan>\n          ))}\n        </s.TagDiv>\n        <s.EditorBtn onClick={onWriting}>Publish Article</s.EditorBtn>\n      </div>\n    </s.EditorContainer>\n  );\n};\nexport default Editor;\n"],"mappings":"2yBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,GAAK,CAAAC,CAAC,KAAM,SAAS,CAC5B,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,SAAS,CACnC,OAASC,OAAO,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvC,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACxB,GAAM,CAAAC,MAAM,CAAG,GAAI,CAAAR,OAAO,EAAE,CAC5B,GAAM,CAAAS,MAAM,CAAGD,MAAM,CAACE,GAAG,CAAC,QAAQ,CAAC,CACnC,GAAM,CAAAC,QAAQ,CAAGH,MAAM,CAACE,GAAG,CAAC,UAAU,CAAC,CACvC,GAAM,CAAAE,KAAK,CAAGJ,MAAM,CAACE,GAAG,CAAC,OAAO,CAAC,CAEjC,IAAAG,SAAA,CAAwBlB,QAAQ,CAAC,EAAE,CAAC,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAgCvB,QAAQ,CAAC,EAAE,CAAC,CAAAwB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA0B3B,QAAQ,CAAC,CACjC4B,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EACX,CAAC,CAAC,CAAAC,UAAA,CAAAV,cAAA,CAAAO,UAAA,IAHKI,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAKtB,GAAM,CAAAG,QAAQ,CAAGhC,WAAW,EAAE,CAC9B,GAAQ,CAAA2B,KAAK,CAAcG,KAAK,CAAxBH,KAAK,CAAEC,OAAO,CAAKE,KAAK,CAAjBF,OAAO,CAEtB,GAAM,CAAAK,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,CAAC,CAAK,CACrB,IAAAC,SAAA,CAAwBD,CAAC,CAACE,MAAM,CAAxBC,IAAI,CAAAF,SAAA,CAAJE,IAAI,CAAEC,KAAK,CAAAH,SAAA,CAALG,KAAK,CACnBP,QAAQ,CAAAQ,aAAA,CAAAA,aAAA,IACHT,KAAK,KAAAU,eAAA,IACPH,IAAI,CAAGC,KAAK,GACb,CACJ,CAAC,CACD;AACA,GAAM,CAAAG,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIP,CAAC,CAAK,CACxB,GAAIA,CAAC,CAACE,MAAM,CAACE,KAAK,CAACI,MAAM,GAAK,CAAC,EAAIR,CAAC,CAACS,GAAG,GAAK,OAAO,CAAE,CACpDC,MAAM,EAAE,CACV,CACF,CAAC,CACD;AACA,GAAM,CAAAA,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,GAAI,CAAAC,QAAQ,CAAAC,kBAAA,CAAOtB,QAAQ,CAAC,CAC5BqB,QAAQ,CAACE,IAAI,CAAC3B,IAAI,CAAC,CACnBK,WAAW,CAACoB,QAAQ,CAAC,CACrBxB,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,CACD;AACA,GAAM,CAAA2B,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,EAAE,CAAK,CACvBxB,WAAW,CAAC,SAACD,QAAQ,QAAK,CAAAA,QAAQ,CAAC0B,MAAM,CAAC,SAACC,CAAC,CAAEC,EAAE,QAAK,CAAAA,EAAE,GAAKH,EAAE,GAAC,GAAC,CAClE,CAAC,CAED;AACA,GAAM,CAAAI,SAAS,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,GAAA,CAAAC,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAEVN,QAAQ,CAAGQ,MAAM,CAAC3C,QAAQ,CAAC,CACzBoC,GAAG,CAAG,GAAI,CAAAQ,IAAI,CAACA,IAAI,CAACR,GAAG,EAAE,CAAC,CAAAI,QAAA,CAAAE,IAAA,SAEd,CAAAhE,KAAK,CAACmE,IAAI,IAAAC,MAAA,CACvBC,OAAO,CAACC,GAAG,CAACC,qBAAqB,uBACpC,CACE9C,KAAK,CAAEA,KAAK,CACZC,OAAO,CAAEA,OAAO,CAChBR,IAAI,CAAEuC,QAAQ,CACde,SAAS,CAAEd,GAAG,CACde,OAAO,CAAE9D,MAAM,CACfE,QAAQ,CAAEA,QAAQ,CAClBC,KAAK,CAAEA,KACT,CAAC,CACD,CACE4D,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAP,MAAA,CAAYnE,SAAS,CAAC,OAAO,CAAC,CAC7C,CACF,CAAC,CACF,QAjBK0D,GAAG,CAAAG,QAAA,CAAAc,IAAA,CAmBT9C,QAAQ,CAAC,GAAG,CAAC,CACb+C,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAACjB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAkB,EAAA,CAAAlB,QAAA,aAEzBmB,KAAK,CAACnB,QAAA,CAAAkB,EAAA,CAAME,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,CAAC,yBAAAtB,QAAA,CAAAuB,IAAA,MAAA7B,OAAA,iBAEtC,kBA7BK,CAAAL,SAASA,CAAA,SAAAC,KAAA,CAAAkC,KAAA,MAAAC,SAAA,OA6Bd,CAED,mBACEnF,IAAA,CAACL,CAAC,CAACyF,eAAe,EAAAC,QAAA,cAChBnF,KAAA,QAAAmF,QAAA,eACErF,IAAA,CAACL,CAAC,CAAC2F,UAAU,EACXC,IAAI,CAAC,MAAM,CACXxD,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEX,KAAM,CACbmE,QAAQ,CAAE7D,OAAQ,CAClB8D,WAAW,CAAC,eAAe,EAC3B,cACFzF,IAAA,CAACL,CAAC,CAAC+F,WAAW,EACZH,IAAI,CAAC,MAAM,CACXxD,IAAI,CAAC,SAAS,CACdC,KAAK,CAAEV,OAAQ,CACfkE,QAAQ,CAAE7D,OAAQ,CAClB8D,WAAW,CAAC,kCAAkC,EAC9C,cACFzF,IAAA,CAACL,CAAC,CAACgG,QAAQ,EACTJ,IAAI,CAAC,MAAM,CACXxD,IAAI,CAAC,MAAM,CACXC,KAAK,CAAElB,IAAK,CACZ0E,QAAQ,CAAE,SAAAA,SAAC5D,CAAC,QAAK,CAAAb,OAAO,CAACa,CAAC,CAACE,MAAM,CAACE,KAAK,CAAC,EAAC,CACzCG,UAAU,CAAEA,UAAW,CACvBsD,WAAW,CAAC,oFAAmB,EAC/B,cACFzF,IAAA,CAACL,CAAC,CAACiG,MAAM,EAAAP,QAAA,CACNnE,QAAQ,CAAC2E,GAAG,CAAC,SAAC/C,EAAE,CAAEH,EAAE,qBACnBzC,KAAA,CAACP,CAAC,CAACmG,OAAO,EAAAT,QAAA,eACRrF,IAAA,CAACL,CAAC,CAACoG,SAAS,EACV,aAAW,eAAe,CAC1BC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAtD,QAAQ,CAACC,EAAE,CAAC,EAAC,CAAA0C,QAAA,CAC7B,GAED,EAAc,CACbvC,EAAE,GAPWH,EAAE,CAQN,EACb,CAAC,EACO,cACX3C,IAAA,CAACL,CAAC,CAACsG,SAAS,EAACD,OAAO,CAAEjD,SAAU,CAAAsC,QAAA,CAAC,iBAAe,EAAc,GAC1D,EACY,CAExB,CAAC,CACD,cAAe,CAAAlF,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}