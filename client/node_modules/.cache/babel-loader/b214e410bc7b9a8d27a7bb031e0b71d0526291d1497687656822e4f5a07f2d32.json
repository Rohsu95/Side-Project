{"ast":null,"code":"import _objectSpread from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rohsuhyeok/Desktop/Side-Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Cookies}from\"react-cookie\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import*as s from\"./style\";import{login}from\"api/userAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _errors$email,_errors$password;var navigate=useNavigate();var cookie=new Cookies();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var _res$response,_res$response$data,res,_res$data,_res$data2,_res$data3,_res$data4,userId,token,username,image;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return login(data);case 3:res=_context.sent;if(res!==null&&res!==void 0&&(_res$response=res.response)!==null&&_res$response!==void 0&&(_res$response$data=_res$response.data)!==null&&_res$response$data!==void 0&&_res$response$data.status){alert(\"가입된 정보가 없습니다.\");}else if((res===null||res===void 0?void 0:res.status)===200){userId=res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.userId;token=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.token;username=res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.username;image=res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.image;cookie.set(\"token\",token);cookie.set(\"userId\",userId);cookie.set(\"username\",username);cookie.set(\"image\",image);navigate(\"/\");window.location.reload();}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);alert(_context.t0.response.data.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(s.Container,{children:[/*#__PURE__*/_jsxs(s.Sign,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign In\"}),/*#__PURE__*/_jsx(s.SignupLink,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"p\",{className:\"login\",children:\"Need an account?\"})})]}),/*#__PURE__*/_jsx(s.FormContainer,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"email\",{required:\"12자 이상 20자 이하의 email을 입력해 주세요\",minLength:{value:12,message:\"12자 이상의 email 입력해 주세요\"},maxLength:{value:20,message:\"20자 이하의 email을 입력해 주세요\"}})),{},{type:\"email\",className:\"Input\",placeholder:\"Email\"})),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"Input\",placeholder:\"Password\",type:\"password\"},register(\"password\",{required:\"8자 이상 12자 이하의 password를 입력해 주세요\",minLength:{value:8,message:\"8자 이상의 password를 입력해 주세요\"},maxLength:{value:12,message:\"12자 이하의 password를 입력해 주세요\"}}))),/*#__PURE__*/_jsx(\"span\",{children:errors===null||errors===void 0?void 0:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign in\"})]})})]});};export default Login;","map":{"version":3,"names":["React","Cookies","useForm","useNavigate","s","login","jsx","_jsx","jsxs","_jsxs","Login","_errors$email","_errors$password","navigate","cookie","_useForm","register","handleSubmit","errors","formState","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","_res$response","_res$response$data","res","_res$data","_res$data2","_res$data3","_res$data4","userId","token","username","image","wrap","_callee$","_context","prev","next","sent","response","status","alert","set","window","location","reload","t0","console","log","message","stop","_x","apply","arguments","Container","children","Sign","SignupLink","to","className","FormContainer","_objectSpread","required","minLength","value","maxLength","type","placeholder","email","password"],"sources":["/Users/rohsuhyeok/Desktop/Side-Project/client/src/page/Login/Login.js"],"sourcesContent":["import React from \"react\";\nimport { Cookies } from \"react-cookie\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as s from \"./style\";\nimport { login } from \"api/userAPI\";\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const cookie = new Cookies();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = async (data) => {\n    try {\n      const res = await login(data);\n      if (res?.response?.data?.status) {\n        alert(\"가입된 정보가 없습니다.\");\n      } else if (res?.status === 200) {\n        const userId = res?.data?.userId;\n        const token = res?.data?.token;\n        const username = res?.data?.username;\n        const image = res?.data?.image;\n        cookie.set(\"token\", token);\n        cookie.set(\"userId\", userId);\n        cookie.set(\"username\", username);\n        cookie.set(\"image\", image);\n        navigate(\"/\");\n        window.location.reload();\n      }\n    } catch (err) {\n      console.log(err);\n      alert(err.response.data.message);\n    }\n  };\n\n  return (\n    <s.Container>\n      <s.Sign>\n        <h1>Sign In</h1>\n        <s.SignupLink to=\"/signup\">\n          <p className=\"login\">Need an account?</p>\n        </s.SignupLink>\n      </s.Sign>\n      <s.FormContainer>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <input\n            {...register(\"email\", {\n              required: \"12자 이상 20자 이하의 email을 입력해 주세요\",\n              minLength: {\n                value: 12,\n                message: \"12자 이상의 email 입력해 주세요\",\n              },\n              maxLength: {\n                value: 20,\n                message: \"20자 이하의 email을 입력해 주세요\",\n              },\n            })}\n            type=\"email\"\n            className=\"Input\"\n            placeholder=\"Email\"\n          />\n          <span>{errors?.email?.message}</span>\n\n          <input\n            className=\"Input\"\n            placeholder=\"Password\"\n            type=\"password\"\n            {...register(\"password\", {\n              required: \"8자 이상 12자 이하의 password를 입력해 주세요\",\n              minLength: {\n                value: 8,\n                message: \"8자 이상의 password를 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 password를 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.password?.message}</span>\n          <button>Sign in</button>\n        </form>\n      </s.FormContainer>\n    </s.Container>\n  );\n};\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}