{"version":3,"file":"static/js/714.7c0950d0.chunk.js","mappings":"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","sources":["cookies.js","page/Setting/style.js","page/Setting/Setting.js"],"sourcesContent":["import { Cookies } from \"react-cookie\";\n\nconst cookies = new Cookies();\n\nexport const setCookie = (name, value, option) => {\n  return cookies.set(name, value, { ...option });\n};\n\nexport const getCookie = (name) => {\n  return cookies.get(name);\n};\n\nexport const removeCookie = (name, option) => {\n  return cookies.remove(name, { ...option });\n};\n","import styled from \"styled-components\";\nimport theme from \"../../styles/Theme\";\n\nexport const Container = styled.div`\n  margin-top: 1rem;\n\n  h1 {\n    text-align: center;\n    font-weight: 400;\n    margin-bottom: 1rem;\n    @media ${theme.media.height} {\n      font-size: ${theme.fontSizes.fs15};\n    }\n  }\n`;\nexport const FormContainer = styled.div`\n  display: flex;\n  justify-content: center;\n\n  input {\n    width: 45vw;\n    outline: none;\n    display: block;\n    border-radius: 3px;\n    border: 1px solid ${theme.colors.gray_03};\n  }\n  form {\n    padding-bottom: 2rem;\n  }\n  span {\n    font-size: ${theme.fontSizes.fs07};\n    color: red;\n    display: block;\n    margin-bottom: 1rem;\n    @media ${theme.media.height} {\n      font-size: ${theme.fontSizes.fs06};\n    }\n  }\n`;\nexport const FirstInput = styled.input`\n  padding: 0.5rem;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n`;\nexport const SecondInput = styled.input`\n  margin-bottom: 0.25rem;\n  padding: 0.9rem 0.5rem;\n`;\nexport const TextArea = styled.textarea`\n  width: 45vw;\n  height: 15vh;\n  outline: none;\n  padding: 0.5rem;\n  display: block;\n  margin-bottom: 1rem;\n  border-radius: 3px;\n  border: 1px solid ${theme.colors.gray_03};\n`;\nexport const SettingBtn = styled.button`\n  float: right;\n  cursor: pointer;\n  border-radius: 5px;\n  padding: 0.5rem 0.75rem;\n  color: ${theme.colors.white};\n  background-color: ${theme.colors.main};\n  border: 1px solid ${theme.colors.main};\n\n  &:hover {\n    background-color: ${theme.colors.main_hover};\n  }\n  @media ${theme.media.height} {\n    font-size: ${theme.fontSizes.fs0};\n  }\n`;\n","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as s from \"./style\";\nimport axios from \"axios\";\nimport { Cookies } from \"react-cookie\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { removeCookie } from \"cookies\";\n\nconst Setting = () => {\n  const cookie = new Cookies();\n  const Token = cookie.get(\"token\");\n  const userId = cookie.get(\"userId\");\n\n  const queryClient = useQueryClient();\n\n  const navigate = useNavigate();\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm();\n\n  // 수정 기능\n  const { mutate } = useMutation({\n    mutationKey: \"PATCH\",\n    // mutationFn: patchPlaces,\n    mutationFn: async (data) =>\n      await axios.patch(\n        `${process.env.REACT_APP_BACKEND_URL}/api/users/${userId}`,\n        data\n      ),\n    onSuccess: (data) => {\n      alert(\"정보 수정에 성공하였습니다.\");\n      const username = data?.data?.user?.username;\n      removeCookie(\"username\");\n      cookie.set(\"username\", username);\n      queryClient.invalidateQueries();\n      navigate(\"/mypage\");\n    },\n    onError: (e) => {\n      alert(e?.response?.data?.message);\n    },\n  });\n\n  const onSetting = () => {\n    mutate({\n      username: watch(\"username\"),\n      email: watch(\"email\"),\n      password: watch(\"password\"),\n    });\n  };\n\n  const onSettings = async (id) => {\n    await axios\n      .patch(\n        `${process.env.REACT_APP_BACKEND_URL}/api/users/${id}`,\n        {\n          username: watch(\"username\"),\n          email: watch(\"email\"),\n          password: watch(\"password\"),\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${Token}`,\n          },\n        }\n      )\n      .then((res) => {\n        alert(\"정보 수정에 성공하였습니다.\");\n        const username = res?.data?.user?.username;\n        cookie.set(\"username\", username);\n        navigate(\"/mypage\");\n        window.location.reload();\n      })\n      .catch((error) => {\n        alert(error?.response?.data?.message);\n      });\n  };\n  return (\n    <s.Container>\n      <h1>Your Settings</h1>\n      <s.FormContainer>\n        <form onSubmit={handleSubmit(() => onSetting(userId))}>\n          <s.SecondInput\n            type=\"text\"\n            placeholder=\"Username\"\n            name=\"username\"\n            {...register(\"username\", {\n              required: \"4자 이상 12자리 이하로 입력해 주세요\",\n              minLength: {\n                value: 4,\n                message: \"4자 이상의 username을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 usename을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.username?.message}</span>\n\n          <s.SecondInput\n            placeholder=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            {...register(\"email\", {\n              required: \"12자 이상 20자 이하로 입력해 주세요\",\n              minLength: {\n                value: 12,\n                message: \"12자 이상의 email을 입력해 주세요\",\n              },\n              maxLength: {\n                value: 20,\n                message: \"20자 이하의 email을 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.email?.message}</span>\n\n          <s.SecondInput\n            placeholder=\"New Password\"\n            type=\"password\"\n            name=\"password\"\n            {...register(\"password\", {\n              required: \"8자 이상 12자 이하로 입력해 주세요\",\n              minLength: {\n                value: 8,\n                message: \"8자 이상의 password를 입력해 주세요\",\n              },\n              maxLength: {\n                value: 12,\n                message: \"12자 이하의 password를 입력해 주세요\",\n              },\n            })}\n          />\n          <span>{errors?.password?.message}</span>\n\n          <s.SettingBtn>Update Settings</s.SettingBtn>\n        </form>\n      </s.FormContainer>\n    </s.Container>\n  );\n};\n\nexport default Setting;\n"],"names":["cookies","Cookies","removeCookie","name","option","remove","_objectSpread","Container","styled","_templateObject","_taggedTemplateLiteral","theme","FormContainer","_templateObject2","SecondInput","_templateObject3","_templateObject4","SettingBtn","_templateObject5","_templateObject6","_errors$username","_errors$email","_errors$password","cookie","userId","get","queryClient","useQueryClient","navigate","useNavigate","_useForm","useForm","register","handleSubmit","watch","errors","formState","_useMutation","useMutation","mutationKey","mutationFn","_mutationFn","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","axios","concat","process","abrupt","sent","stop","_x","apply","arguments","onSuccess","_data$data","_data$data$user","alert","username","user","set","invalidateQueries","onError","e","_e$response","_e$response$data","response","message","mutate","_jsxs","s","children","_jsx","onSubmit","email","password","type","placeholder","required","minLength","value","maxLength"],"sourceRoot":""}